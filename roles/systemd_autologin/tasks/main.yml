---
- name: Create directory for override.conf for tty1
  file:
    path: /etc/systemd/system/getty@tty1.service.d/
    state: directory
  become: true

- name: Create override.conf with autologin configuration using a template
  template:
    src: override.conf.j2
    dest: /etc/systemd/system/getty@tty1.service.d/override.conf
  become: true

- name: Reload and restart getty service for tty1
  systemd:
    name: getty@tty1.service
    daemon_reload: yes
    state: restarted
  become: true
