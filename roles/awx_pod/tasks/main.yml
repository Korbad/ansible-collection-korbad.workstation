---
- name: Ensure awx pod is running
  containers.podman.podman_pod:
    name: awx_pod
    state: started
    ports:
    - "{{ awx_exposed_http_port }}:{{ awx_internal_http_port }}"

- name: Ensure postgres container is running
  include_tasks: postgres.yml

- name: Ensure awx container is running
  include_tasks: awx.yml

- name: Ensure nginx container is running (after awx is running)
  include_tasks: nginx.yml

- name: Check the migration status of the AWX database
  include_tasks: check_migration_status.yml


