---
- name: Copy Nginx configuration
  template:
    src: nginx.conf.j2
    dest: "{{ nginx_config_path }}"
  notify: reload nginx
  changed_when: true
  become: true

- name: Generate sample webpage using template
  template:
    src: index.html.j2
    dest: "{{ nginx_index_path }}"
  become: true

- name: Ensure Nginx is running and enabled
  systemd:
    name: nginx
    state: started
    enabled: true
  become: true
