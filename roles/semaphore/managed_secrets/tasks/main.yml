---
- name: Ensure secret exists
  include_role:
    name: korbad.project_management.managed_secret
  vars:
    managed_secret_name: "{{ item }}"
  loop:
  - semaphore_password

- name: Execute main role
  include_role:
    name: semaphore
  vars:
    semaphore_password: "{{ lookup('file', managed_secrets_path+'/semaphore_password') }}"
